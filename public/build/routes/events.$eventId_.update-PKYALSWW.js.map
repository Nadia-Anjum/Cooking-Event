{
  "version": 3,
  "sources": ["../../../app/routes/events.$eventId_.update.jsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\events.$eventId_.update.jsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\events.$eventId_.update.jsx\");\n  import.meta.hot.lastModified = \"1710277249879.3015\";\n}\n// REMIX HMR END\n\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, useLoaderData, useNavigate } from \"@remix-run/react\";\nimport mongoose from \"mongoose\";\nimport { useState } from \"react\";\nimport { authenticator } from \"../services/auth.server\";\nexport async function loader({\n  params,\n  request\n}) {\n  await authenticator.isAuthenticated(request, {\n    failureRedirect: \"/signin\"\n  });\n  const event = await mongoose.models.Event.findById(params.eventId).populate(\"user\");\n  return json({\n    event\n  });\n}\nexport default function UpdateEvent() {\n  _s();\n  const {\n    event\n  } = useLoaderData();\n  const [image, setImage] = useState(event.image);\n  const navigate = useNavigate();\n  function handleCancel() {\n    navigate(-1);\n  }\n  return <div className=\"page\">\r\n      <h1>Update Post</h1>\r\n      <Form id=\"event-form\" method=\"post\">\r\n      <div className=\"form-row\">\r\n      <div className=\"form-column\">\r\n\r\n      <label htmlFor=\"title\">Title</label>\r\n      <input id=\"title\" name=\"title\" type=\"text\" defaultValue={event.title} placeholder=\"Event Title...\" />\r\n\r\n        <label htmlFor=\"caption\">Caption</label>\r\n        <input id=\"caption\" defaultValue={event.caption} name=\"caption\" type=\"text\" aria-label=\"caption\" placeholder=\"Write a caption...\" />\r\n\r\n        <label htmlFor=\"date\">Date</label>\r\n        <input id=\"date\" name=\"date\" type=\"date\" defaultValue={event.date} />\r\n\r\n        <label htmlFor=\"time\">Time</label>\r\n        <input id=\"time\" name=\"time\" type=\"time\" defaultValue={event.time} />\r\n        </div>\r\n\r\n\r\n        <div className=\"form-column\">\r\n        <label htmlFor=\"location\">Location</label>\r\n        <input id=\"location\" name=\"location\" type=\"text\" defaultValue={event.location} placeholder=\"Event Location...\" />\r\n\r\n        <label htmlFor=\"image\">Image URL</label>\r\n        <input name=\"image\" defaultValue={event.image} type=\"url\" onChange={e => setImage(e.target.value)} placeholder=\"Paste an image URL...\" />\r\n\r\n        <label htmlFor=\"image-preview\">Image Preview</label>\r\n        <img id=\"image-preview\" className=\"image-preview\" src={image ? image : \"https://placehold.co/600x400?text=Paste+an+image+URL\"} alt=\"Choose\" onError={e => e.target.src = \"https://placehold.co/600x400?text=Error+loading+image\"} />\r\n        </div>\r\n        </div>\r\n\r\n\r\n        <input name=\"uid\" type=\"text\" defaultValue={event.uid} hidden />\r\n        <div className=\"btns\">\r\n          <button>Save</button>\r\n          <button type=\"button\" className=\"btn-cancel\" onClick={handleCancel}>\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </Form>\r\n    </div>;\n}\n_s(UpdateEvent, \"rzQ0TXj2wf2d0VQS1yPfc+Mmm44=\", false, function () {\n  return [useLoaderData, useNavigate];\n});\n_c = UpdateEvent;\nexport async function action({\n  request,\n  params\n}) {\n  const authUser = await authenticator.isAuthenticated(request, {\n    failureRedirect: \"/signin\"\n  });\n\n  // Fetch the event to check if the current user is the creator\n  const eventToUpdate = await mongoose.models.Event.findById(params.eventId);\n  if (eventToUpdate.user.toString() !== authUser._id.toString()) {\n    // User is not the creator of the event, redirect\n    return redirect(`/events/${params.eventId}`);\n  }\n  const formData = await request.formData();\n  const event = Object.fromEntries(formData);\n  eventToUpdate.caption = event.caption;\n  eventToUpdate.image = event.image;\n  eventToUpdate.location = event.location;\n  eventToUpdate.time = event.time;\n  eventToUpdate.date = event.date;\n  eventToUpdate.title = event.title;\n  await eventToUpdate.save();\n  return redirect(`/events/${params.eventId}`);\n}\nvar _c;\n$RefreshReg$(_c, \"UpdateEvent\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_react"]
}
